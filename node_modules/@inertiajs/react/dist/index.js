var we=Object.create;var Y=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var He=Object.getPrototypeOf,Be=Object.prototype.hasOwnProperty;var Ne=(r,t)=>{for(var o in t)Y(r,o,{get:t[o],enumerable:!0})},me=(r,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Le(t))!Be.call(r,n)&&n!==o&&Y(r,n,{get:()=>t[n],enumerable:!(a=Me(t,n))||a.enumerable});return r};var ge=(r,t,o)=>(o=r!=null?we(He(r)):{},me(t||!r||!r.__esModule?Y(o,"default",{value:r,enumerable:!0}):o,r)),Ve=r=>me(Y({},"__esModule",{value:!0}),r);var je={};Ne(je,{Deferred:()=>be,Head:()=>Ce,Link:()=>Re,WhenVisible:()=>Oe,createInertiaApp:()=>ue,router:()=>$e,useForm:()=>le,usePage:()=>W,usePoll:()=>fe,usePrefetch:()=>de,useRemember:()=>M});module.exports=Ve(je);var De=require("@inertiajs/core");var G=require("@inertiajs/core"),Te=require("react");var j=require("@inertiajs/core"),C=require("react");var Pe=require("react"),ye=(0,Pe.createContext)(void 0);ye.displayName="InertiaHeadContext";var U=ye;var he=require("react"),Se=(0,he.createContext)(void 0);Se.displayName="InertiaPageContext";var $=Se;function z({children:r,initialPage:t,initialComponent:o,resolveComponent:a,titleCallback:n,onHeadUpdate:g}){let[c,P]=(0,C.useState)({component:o||null,page:t,key:null}),y=(0,C.useMemo)(()=>(0,j.createHeadManager)(typeof window>"u",n||(f=>f),g||(()=>{})),[]);if((0,C.useEffect)(()=>{j.router.init({initialPage:t,resolveComponent:a,swapComponent:async({component:f,page:e,preserveState:d})=>{P(s=>({component:f,page:e,key:d?s.key:Date.now()}))}}),j.router.on("navigate",()=>y.forceUpdate())},[]),!c.component)return(0,C.createElement)(U.Provider,{value:y},(0,C.createElement)($.Provider,{value:c.page},null));let h=r||(({Component:f,props:e,key:d})=>{let s=(0,C.createElement)(f,{key:d,...e});return typeof f.layout=="function"?f.layout(s):Array.isArray(f.layout)?f.layout.concat(s).reverse().reduce((S,F)=>(0,C.createElement)(F,{children:S,...e})):s});return(0,C.createElement)(U.Provider,{value:y},(0,C.createElement)($.Provider,{value:c.page},h({Component:c.component,key:c.key,props:c.page.props})))}z.displayName="Inertia";async function ue({id:r="app",resolve:t,setup:o,title:a,progress:n={},page:g,render:c}){let P=typeof window>"u",y=P?null:document.getElementById(r),h=g||JSON.parse(y.dataset.page),f=s=>Promise.resolve(t(s)).then(S=>S.default||S),e=[],d=await Promise.all([f(h.component),G.router.decryptHistory().catch(()=>{})]).then(([s])=>o({el:y,App:z,props:{initialPage:h,initialComponent:s,resolveComponent:f,titleCallback:a,onHeadUpdate:P?S=>e=S:null}}));if(!P&&n&&(0,G.setupProgress)(n),P){let s=await c((0,Te.createElement)("div",{id:r,"data-page":JSON.stringify(h)},d));return{head:e,body:s}}}var X=require("react");var Fe=require("react");function W(){let r=(0,Fe.useContext)($);if(!r)throw new Error("usePage must be used within the Inertia component");return r}var ve=({children:r,data:t,fallback:o})=>{if(!t)throw new Error("`<Deferred>` requires a `data` prop");let[a,n]=(0,X.useState)(!1),g=W().props,c=Array.isArray(t)?t:[t];return(0,X.useEffect)(()=>{n(c.every(P=>g[P]!==void 0))},[g,c]),a?r:o};ve.displayName="InertiaDeferred";var be=ve;var E=ge(require("react"),1);var Ue=function({children:r,title:t}){let o=(0,E.useContext)(U),a=(0,E.useMemo)(()=>o.createProvider(),[o]);(0,E.useEffect)(()=>()=>{a.disconnect()},[a]);function n(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function g(e){let d=Object.keys(e.props).reduce((s,S)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(S))return s;let F=e.props[S];return F===""?s+` ${S}`:s+` ${S}="${F}"`},"");return`<${e.type}${d}>`}function c(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((d,s)=>d+P(s),"")}function P(e){let d=g(e);return e.props.children&&(d+=c(e)),e.props.dangerouslySetInnerHTML&&(d+=e.props.dangerouslySetInnerHTML.__html),n(e)||(d+=`</${e.type}>`),d}function y(e){return E.default.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function h(e){return P(y(e))}function f(e){let d=E.default.Children.toArray(e).filter(s=>s).map(s=>h(s));return t&&!d.find(s=>s.startsWith("<title"))&&d.push(`<title inertia>${t}</title>`),d}return a.update(f(r)),null},Ce=Ue;var x=require("@inertiajs/core"),v=require("react"),A=()=>{},ke=(0,v.forwardRef)(({children:r,as:t="a",data:o={},href:a,method:n="get",preserveScroll:g=!1,preserveState:c=null,replace:P=!1,only:y=[],except:h=[],headers:f={},queryStringArrayFormat:e="brackets",async:d=!1,onClick:s=A,onCancelToken:S=A,onBefore:F=A,onStart:O=A,onProgress:D=A,onFinish:te=A,onCancel:K=A,onSuccess:re=A,onError:B=A,prefetch:b=!1,cacheFor:R=0,...oe},ne)=>{let[se,_]=(0,v.useState)(0),N=(0,v.useRef)(null);t=t.toLowerCase(),n=n.toLowerCase();let[w,ae]=(0,x.mergeDataIntoQueryString)(n,a||"",o,e);a=w,o=ae;let q={data:o,method:n,preserveScroll:g,preserveState:c??n!=="get",replace:P,only:y,except:h,headers:f,async:d},J={...q,onCancelToken:S,onBefore:F,onStart(l){_(m=>m+1),O(l)},onProgress:D,onFinish(l){_(m=>m-1),te(l)},onCancel:K,onSuccess:re,onError:B},V=()=>{x.router.prefetch(a,q,{cacheFor:ie})},I=(0,v.useMemo)(()=>b===!0?["hover"]:b===!1?[]:Array.isArray(b)?b:[b],Array.isArray(b)?b:[b]),ie=(0,v.useMemo)(()=>R!==0?R:I.length===1&&I[0]==="click"?0:3e4,[R,I]);(0,v.useEffect)(()=>()=>{clearTimeout(N.current)},[]),(0,v.useEffect)(()=>{I.includes("mount")&&setTimeout(()=>V())},I);let Q={onClick:l=>{s(l),(0,x.shouldIntercept)(l)&&(l.preventDefault(),x.router.visit(a,J))}},u={onMouseEnter:()=>{N.current=window.setTimeout(()=>{V()},75)},onMouseLeave:()=>{clearTimeout(N.current)},onClick:Q.onClick},T={onMouseDown:l=>{(0,x.shouldIntercept)(l)&&(l.preventDefault(),V())},onMouseUp:l=>{l.preventDefault(),x.router.visit(a,J)},onClick:l=>{s(l),(0,x.shouldIntercept)(l)&&l.preventDefault()}};return n!=="get"&&(t="button"),(0,v.createElement)(t,{...oe,...{a:{href:a},button:{type:"button"}}[t]||{},ref:ne,...I.includes("hover")?u:I.includes("click")?T:Q,"data-loading":se>0?"":void 0},r)});ke.displayName="InertiaLink";var Re=ke;var ce=require("@inertiajs/core"),xe=ge(require("lodash.isequal"),1),p=require("react");var pe=require("@inertiajs/core"),Z=require("react");function M(r,t){let[o,a]=(0,Z.useState)(()=>{let n=pe.router.restore(t);return n!==void 0?n:r});return(0,Z.useEffect)(()=>{pe.router.remember(o,t)},[o,t]),[o,a]}function le(r,t){let o=(0,p.useRef)(null),a=typeof r=="string"?r:null,[n,g]=(0,p.useState)((typeof r=="string"?t:r)||{}),c=(0,p.useRef)(null),P=(0,p.useRef)(null),[y,h]=a?M(n,`${a}:data`):(0,p.useState)(n),[f,e]=a?M({},`${a}:errors`):(0,p.useState)({}),[d,s]=(0,p.useState)(!1),[S,F]=(0,p.useState)(!1),[O,D]=(0,p.useState)(null),[te,K]=(0,p.useState)(!1),[re,B]=(0,p.useState)(!1),b=(0,p.useRef)(u=>u);(0,p.useEffect)(()=>(o.current=!0,()=>{o.current=!1}),[]);let R=(0,p.useCallback)((u,T,i={})=>{let l={...i,onCancelToken:m=>{if(c.current=m,i.onCancelToken)return i.onCancelToken(m)},onBefore:m=>{if(K(!1),B(!1),clearTimeout(P.current),i.onBefore)return i.onBefore(m)},onStart:m=>{if(F(!0),i.onStart)return i.onStart(m)},onProgress:m=>{if(D(m),i.onProgress)return i.onProgress(m)},onSuccess:m=>{if(o.current&&(F(!1),D(null),e({}),s(!1),K(!0),B(!0),P.current=setTimeout(()=>{o.current&&B(!1)},2e3)),i.onSuccess)return i.onSuccess(m)},onError:m=>{if(o.current&&(F(!1),D(null),e(m),s(!0)),i.onError)return i.onError(m)},onCancel:()=>{if(o.current&&(F(!1),D(null)),i.onCancel)return i.onCancel()},onFinish:m=>{if(o.current&&(F(!1),D(null)),c.current=null,i.onFinish)return i.onFinish(m)}};u==="delete"?ce.router.delete(T,{...l,data:b.current(y)}):ce.router[u](T,b.current(y),l)},[y,e,b]),oe=(0,p.useCallback)((u,T)=>{h(typeof u=="string"?i=>({...i,[u]:T}):typeof u=="function"?i=>u(i):u)},[h]),ne=(0,p.useCallback)((u,T)=>{g(typeof u>"u"?()=>y:i=>({...i,...typeof u=="string"?{[u]:T}:u}))},[y,g]),se=(0,p.useCallback)((...u)=>{u.length===0?h(n):h(T=>Object.keys(n).filter(i=>u.includes(i)).reduce((i,l)=>(i[l]=n[l],i),{...T}))},[h,n]),_=(0,p.useCallback)((u,T)=>{e(i=>{let l={...i,...typeof u=="string"?{[u]:T}:u};return s(Object.keys(l).length>0),l})},[e,s]),N=(0,p.useCallback)((...u)=>{e(T=>{let i=Object.keys(T).reduce((l,m)=>({...l,...u.length>0&&!u.includes(m)?{[m]:T[m]}:{}}),{});return s(Object.keys(i).length>0),i})},[e,s]),w=u=>(T,i)=>{R(u,T,i)},ae=(0,p.useCallback)(w("get"),[R]),q=(0,p.useCallback)(w("post"),[R]),J=(0,p.useCallback)(w("put"),[R]),V=(0,p.useCallback)(w("patch"),[R]),I=(0,p.useCallback)(w("delete"),[R]),ie=(0,p.useCallback)(()=>{c.current&&c.current.cancel()},[]),Q=(0,p.useCallback)(u=>{b.current=u},[]);return{data:y,setData:oe,isDirty:!(0,xe.default)(y,n),errors:f,hasErrors:d,processing:S,progress:O,wasSuccessful:te,recentlySuccessful:re,transform:Q,setDefaults:ne,reset:se,setError:_,clearErrors:N,submit:R,get:ae,post:q,put:J,patch:V,delete:I,cancel:ie}}var Ie=require("@inertiajs/core"),ee=require("react");function fe(r,t={},o={keepAlive:!1,autoStart:!0}){let a=(0,ee.useRef)(Ie.router.poll(r,t,{...o,autoStart:!1}));return(0,ee.useEffect)(()=>((o.autoStart??!0)&&a.current.start(),()=>a.current.stop()),[]),{stop:a.current.stop,start:a.current.start}}var L=require("@inertiajs/core"),H=require("react");function de(r={}){let t=typeof window>"u"?null:L.router.getCached(window.location.pathname,r),o=typeof window>"u"?null:L.router.getPrefetching(window.location.pathname,r),[a,n]=(0,H.useState)(t?.staleTimestamp||null),[g,c]=(0,H.useState)(o!==null),[P,y]=(0,H.useState)(t!==null);return(0,H.useEffect)(()=>{let h=L.router.on("prefetching",e=>{e.detail.visit.url.pathname===window.location.pathname&&c(!0)}),f=L.router.on("prefetched",e=>{e.detail.visit.url.pathname===window.location.pathname&&(c(!1),y(!0),n(e.detail.fetchedAt))});return()=>{f(),h()}},[]),{lastUpdatedAt:a,isPrefetching:g,isPrefetched:P,flush:()=>L.router.flush(window.location.pathname,r)}}var Ee=require("@inertiajs/core"),k=require("react"),Ae=({children:r,data:t,params:o,buffer:a,as:n,always:g,fallback:c})=>{g=g??!1,n=n??"div",c=c??null;let[P,y]=(0,k.useState)(!1),h=(0,k.useRef)(!1),f=(0,k.useRef)(!1),e=(0,k.useRef)(null),d=(0,k.useCallback)(()=>{if(t)return{only:Array.isArray(t)?t:[t]};if(!o)throw new Error("You must provide either a `data` or `params` prop.");return o},[o,t]);return(0,k.useEffect)(()=>{if(!e.current)return;let s=new IntersectionObserver(S=>{if(!S[0].isIntersecting||(!g&&h.current&&s.disconnect(),f.current))return;h.current=!0,f.current=!0;let F=d();Ee.router.reload({...F,onStart:O=>{f.current=!0,F.onStart?.(O)},onFinish:O=>{y(!0),f.current=!1,F.onFinish?.(O),g||s.disconnect()}})},{rootMargin:`${a||0}px`});return s.observe(e.current),()=>{s.disconnect()}},[e,d,a]),g||!P?(0,k.createElement)(n,{props:null,ref:e},P?r:c):P?r:null};Ae.displayName="InertiaWhenVisible";var Oe=Ae;var $e=De.router;
//# sourceMappingURL=index.js.map
